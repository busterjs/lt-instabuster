module.exports = {
  create: function (options) {
    return Object.create(this);
  },

  listen: function (runner) {
    runner.bind(this);
    return this;
  },

  "suite:start": function () {

  },

  "suite:configuration": function (e) {
    this.expectedTests = e.tests;
    this.executedTests = 0;
    process.send({
      status: "suite-configuration",
      details: e
    });
  },

  "suite:end": function (r) {
    //console.log(r);
    process.send({
      status: "suite-complete",
      results: r
    });
  },

  "context:start": function (context) {
    this.contexts = this.contexts || [];
    var testCase = { name: context.name };

    if (this.contexts.length == 0) {
      this.suite = testCase;
    }

    this.contexts.push(testCase);
  },

  "context:end": function () {
    var context = this.contexts.pop();

    if (this.contexts.length > 0) {
      return;
    }
  },


  "test:setUp": function (e) {
    this.test = {name: e.name, log: []};
  },

  "test:tearDown": function (e) {

  },

  "test:success": function (testData) {
    this.executedTests += 1;
    process.send({
      status: "success",
      context: this.contexts,
      details: testData,
      executedTests: this.executedTests,
      expectedTests: this.expectedTests,
      log: this.test.log
    });
  },

  "test:error": function (testData) {
    this.executedTests += 1;
    process.send({
      status: "error",
      context: this.contexts,
      details: testData,
      executedTests: this.executedTests,
      expectedTests: this.expectedTests,
      log: this.test.log
    });
  },

  "test:failure": function (testData) {
    this.executedTests += 1;
    process.send({
      status: "failure",
      context: this.contexts,
      details: testData,
      executedTests: this.executedTests,
      expectedTests: this.expectedTests,
      log: this.test.log
    });
  },

  log: function(e) {
    this.test.log.push(e.message);
    /*process.send({
      status: "log",
      context: this.contexts,
      test: this.test.name,
      message: e.message
    });*/
  }


};
