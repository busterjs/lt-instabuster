module.exports = {
  create: function (options) {
    return Object.create(this);
  },

  listen: function (runner) {
    runner.bind(this);
    return this;
  },

  "suite:start": function () {
    //console.log("Suite start");
  },

  "suite:end": function () {
    //console.log("Suite end");
  },

  "context:start": function (context) {
    this.contexts = this.contexts || [];
    var testCase = { name: context.name };

    if (this.contexts.length == 0) {
      this.suite = testCase;
    }

    this.contexts.push(testCase);

    //console.log("Context start: " + context.name);
  },

  "context:end": function () {
    var context = this.contexts.pop();

    if (this.contexts.length > 0) {
      return;
    }
    //console.log("Context end: " + context.name);
  },



  "test:success": function (test) {
    //console.log("Test success: " + test.name);
    //console.log(test);
    process.send({
      status: "success",
      context: this.contexts,
      details: test
    });
  },

  "test:error": function (testData) {
    process.send({
      status: "error",
      context: this.contexts,
      details: testData
    });
  },

  "test:failure": function (testData) {
    process.send({
      status: "failure",
      context: this.contexts,
      details: testData
    });
  }


};
